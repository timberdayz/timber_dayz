# Shopee商家端数据采集配置文件
# 文件名: shopee_config.yaml
# 用途: Shopee平台数据采集配置

platform_name: "shopee"
platform_display_name: "Shopee商家端"
version: "1.0.0"

# 基础连接配置
connection:
  base_url: "https://seller.shopee.cn"
  login_url: "https://seller.shopee.cn/account/signin"
  dashboard_url: "https://seller.shopee.cn/"
  timeout: 60
  retry_times: 3
  retry_delay: 5

# 认证配置
authentication:
  username_field: "input[type='text'], input[name='username']"
  password_field: "input[type='password'], input[name='password']"
  login_button: "button[type='submit'], button:has-text('登入')"
  otp_field: "input[placeholder*='验证码']"
  session_timeout: 3600

# 数据采集配置
data_collection:
  # 采集频率（秒）
  update_frequency: 3600
  
  # 数据范围（天）
  data_range_days: 7
  
  # 数据类型开关
  data_types:
    dashboard: true      # 仪表板数据
    shop_analytics: true # 店铺分析
    user_profile: true   # 用户画像
    orders: false        # 订单数据（可选）
    products: false      # 商品数据（可选）

# 页面元素选择器
selectors:
  # 登录页面
  login:
    username_input: "input[type='text'], input[name='username']"
    password_input: "input[type='password'], input[name='password']"
    login_button: "button[type='submit'], button:has-text('登入')"
    error_message: ".error-message, .alert-error"
    success_indicator: ".dashboard-container, .main-content"

  # 邮箱验证弹窗
  verification:
    dialog: "div:has-text('邮箱验证'), div:has-text('OTP')"
    otp_input: "input[placeholder*='验证码'], input[placeholder*='OTP']"
    confirm_button: "button:has-text('确认'), button:has-text('验证')"
    phone_option: "a:has-text('发送至电话')"
    resend_link: "a:has-text('重新发送')"

  # 仪表板页面
  dashboard:
    visitor_count: ".visitor-stats .count, .stats-item:has-text('访客') .value"
    page_views: ".page-views .count, .stats-item:has-text('浏览量') .value"
    order_count: ".order-stats .count, .stats-item:has-text('订单') .value"
    revenue_amount: ".revenue-stats .amount, .stats-item:has-text('销售额') .value"
    conversion_rate: ".conversion-rate .value, .stats-item:has-text('转化率') .value"

  # 店铺分析页面
  analytics:
    date_range: "select[name='date_range'], .date-picker input"
    data_type: "select[name='data_type'], .data-type-selector"
    export_format: "select[name='format'], .format-selector"
    export_button: "button:has-text('导出'), button:has-text('Export')"
    chart_container: ".chart-container, .analytics-chart"

  # 用户画像页面
  user_profile:
    age_distribution: ".age-chart, .demographics-chart"
    gender_ratio: ".gender-chart, .gender-distribution"
    location_map: ".location-chart, .geographic-chart"
    behavior_metrics: ".behavior-stats, .user-behavior"

# 数据导出配置
export:
  # 导出格式
  formats:
    - "excel"
    - "csv"
    - "json"
  
  # 时间范围选项
  date_ranges:
    - "7d"    # 最近7天
    - "30d"   # 最近30天
    - "90d"   # 最近90天
    - "custom" # 自定义
  
  # 数据类型选项
  data_types:
    - "operational"  # 运营数据
    - "financial"    # 财务数据
    - "user_behavior" # 用户行为
    - "product_performance" # 商品表现

# 浏览器配置
browser:
  headless: false      # 开发阶段使用有头模式
  slow_mo: 1000        # 操作间隔1秒
  timeout: 30000       # 30秒超时
  viewport: "1920x1080"
  user_agent: "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36"

# 代理配置
proxy:
  required: false      # 是否需要代理
  region: "china"      # 代理地区
  rotation: false      # 是否轮换代理

# 会话管理
session:
  enabled: true        # 启用会话持久化
  storage_path: "temp/sessions/shopee"
  expiration_hours: 24 # 会话有效期（小时）
  auto_restore: true   # 自动恢复会话

# 截图配置
screenshots:
  enabled: true        # 启用截图记录
  directory: "temp/media/screenshots/shopee"
  quality: "high"      # 截图质量
  capture_on_error: true # 错误时截图

# 日志配置
logging:
  level: "INFO"        # 日志级别
  file_path: "logs/shopee_collector.log"
  max_file_size: "10MB"
  backup_count: 5

# 错误处理
error_handling:
  max_retries: 3       # 最大重试次数
  retry_delay: 5       # 重试延迟（秒）
  continue_on_error: false # 错误时是否继续

# 性能配置
performance:
  page_load_timeout: 30    # 页面加载超时
  element_wait_timeout: 10 # 元素等待超时
  action_delay: 1          # 操作间隔（秒）
  max_concurrent_pages: 1  # 最大并发页面数 