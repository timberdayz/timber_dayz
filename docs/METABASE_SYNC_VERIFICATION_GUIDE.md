# MetabaseåŒæ­¥éªŒè¯æŒ‡å—

## âœ… ä»æˆªå›¾çœ‹ï¼Œè¡¨å·²ç»åŒæ­¥äº†ï¼

ä»ä½ æä¾›çš„Metabaseæˆªå›¾å¯ä»¥çœ‹åˆ°ï¼Œ**å¾ˆå¤šæ–°è¡¨å·²ç»æ˜¾ç¤º**ï¼š

### å·²ç¡®è®¤åŒæ­¥çš„è¡¨

**Bç±»æ•°æ®è¡¨ï¼ˆ13å¼ ï¼‰** - âœ… å…¨éƒ¨æ˜¾ç¤ºï¼š
- Fact Raw Data Inventory Snapshot
- Fact Raw Data Orders Daily
- Fact Raw Data Orders Monthly
- Fact Raw Data Orders Weekly
- Fact Raw Data Products Daily
- Fact Raw Data Products Monthly
- Fact Raw Data Products Weekly
- Fact Raw Data Services Daily
- Fact Raw Data Services Monthly
- Fact Raw Data Services Weekly
- Fact Raw Data Traffic Daily
- Fact Raw Data Traffic Monthly
- Fact Raw Data Traffic Weekly

**å…¶ä»–è¡¨** - âœ… å·²æ˜¾ç¤ºï¼š
- Entity Aliases
- Employee Commissions
- Employee Performance
- Employee Targets
- Employees
- Attendance Records

### éœ€è¦æŸ¥æ‰¾çš„è¡¨ï¼ˆå¯èƒ½åœ¨åˆ—è¡¨ä¸­ï¼Œéœ€è¦æ»šåŠ¨æŸ¥çœ‹ï¼‰

**Aç±»æ•°æ®è¡¨**ï¼š
- Sales Targets Aï¼ˆå¯èƒ½åœ¨"S"å¼€å¤´çš„åŒºåŸŸï¼‰
- Sales Campaigns Aï¼ˆå¯èƒ½åœ¨"S"å¼€å¤´çš„åŒºåŸŸï¼‰
- Operating Costsï¼ˆå¯èƒ½åœ¨"O"å¼€å¤´çš„åŒºåŸŸï¼‰
- Performance Config Aï¼ˆå¯èƒ½åœ¨"P"å¼€å¤´çš„åŒºåŸŸï¼‰

**Cç±»æ•°æ®è¡¨**ï¼š
- Shop Commissionsï¼ˆå¯èƒ½åœ¨"S"å¼€å¤´çš„åŒºåŸŸï¼‰
- Performance Scores Cï¼ˆå¯èƒ½åœ¨"P"å¼€å¤´çš„åŒºåŸŸï¼‰

**å…¶ä»–è¡¨**ï¼š
- Staging Raw Dataï¼ˆå¯èƒ½åœ¨"S"å¼€å¤´çš„åŒºåŸŸï¼‰

## ğŸ” å¦‚ä½•éªŒè¯æ‰€æœ‰è¡¨éƒ½å·²åŒæ­¥

### æ–¹æ³•1ï¼šä½¿ç”¨æœç´¢åŠŸèƒ½

åœ¨Metabaseçš„æ•°æ®åº“é¡µé¢ï¼Œä½¿ç”¨æœç´¢æ¡†æœç´¢ä»¥ä¸‹å…³é”®è¯ï¼š

1. **æœç´¢ "sales"** - åº”è¯¥æ‰¾åˆ°ï¼š
   - Sales Targets A
   - Sales Campaigns A

2. **æœç´¢ "operating"** - åº”è¯¥æ‰¾åˆ°ï¼š
   - Operating Costs

3. **æœç´¢ "performance"** - åº”è¯¥æ‰¾åˆ°ï¼š
   - Performance Config A
   - Performance Scores C

4. **æœç´¢ "shop"** - åº”è¯¥æ‰¾åˆ°ï¼š
   - Shop Commissions

5. **æœç´¢ "staging"** - åº”è¯¥æ‰¾åˆ°ï¼š
   - Staging Raw Data

### æ–¹æ³•2ï¼šæŒ‰å­—æ¯é¡ºåºæŸ¥æ‰¾

è¡¨æ˜¯æŒ‰å­—æ¯é¡ºåºæ’åˆ—çš„ï¼Œå¯ä»¥ï¼š

- **æŸ¥æ‰¾ "O" å¼€å¤´çš„è¡¨** â†’ Operating Costs
- **æŸ¥æ‰¾ "P" å¼€å¤´çš„è¡¨** â†’ Performance Config A, Performance Scores C
- **æŸ¥æ‰¾ "S" å¼€å¤´çš„è¡¨** â†’ Sales Targets A, Sales Campaigns A, Shop Commissions, Staging Raw Data

### æ–¹æ³•3ï¼šæ£€æŸ¥è¡¨æ€»æ•°

1. åœ¨æ•°æ®åº“è¯¦æƒ…é¡µï¼ŒæŸ¥çœ‹è¡¨çš„æ€»æ•°
2. åº”è¯¥çœ‹åˆ°**è‡³å°‘26å¼ æ–°è¡¨**ï¼ˆåŠ ä¸Šæ—§è¡¨ï¼Œæ€»æ•°åº”è¯¥æ›´å¤šï¼‰

## âš ï¸ å¦‚æœè¡¨ç¡®å®ç¼ºå¤±

### å¯èƒ½çš„åŸå› 

1. **è¡¨è¿‡æ»¤è®¾ç½®**
   - Metabaseå¯èƒ½é…ç½®äº†è¡¨è¿‡æ»¤è§„åˆ™
   - æŸäº›è¡¨è¢«æ’é™¤åœ¨å¤–

2. **SchemaåŒæ­¥ä¸å®Œæ•´**
   - è™½ç„¶ç‚¹å‡»äº†åŒæ­¥ï¼Œä½†å¯èƒ½åªåŒæ­¥äº†éƒ¨åˆ†è¡¨

3. **è¡¨åå¤§å°å†™é—®é¢˜**
   - PostgreSQLè¡¨åæ˜¯å°å†™ï¼ŒMetabaseæ˜¾ç¤ºå¯èƒ½ä¸åŒ

### è§£å†³æ–¹æ¡ˆ

#### æ–¹æ¡ˆ1ï¼šæ£€æŸ¥è¡¨è¿‡æ»¤è®¾ç½®

1. Admin â†’ Databases â†’ XIHONG_ERP â†’ **Edit**
2. æ£€æŸ¥ä»¥ä¸‹è®¾ç½®ï¼š
   - **Table inclusion patterns**: åº”è¯¥ä¸ºç©ºæˆ–åŒ…å«æ‰€æœ‰è¡¨
   - **Table exclusion patterns**: åº”è¯¥ä¸ºç©ºæˆ–ä¸æ’é™¤æ–°è¡¨
   - **Schema**: åº”è¯¥åŒ…å« `public`

#### æ–¹æ¡ˆ2ï¼šå¼ºåˆ¶é‡æ–°åŒæ­¥

1. åœ¨æ•°æ®åº“è¯¦æƒ…é¡µï¼Œç‚¹å‡» **"Sync database schema now"**
2. ç­‰å¾…åŒæ­¥å®Œæˆï¼ˆå¯èƒ½éœ€è¦30-60ç§’ï¼‰
3. åˆ·æ–°é¡µé¢

#### æ–¹æ¡ˆ3ï¼šä½¿ç”¨APIå¼ºåˆ¶åŒæ­¥

å¦‚æœçŸ¥é“Metabaseç®¡ç†å‘˜å¯†ç ï¼š

```bash
# éœ€è¦è®¾ç½®æ­£ç¡®çš„å¯†ç 
export METABASE_PASSWORD="ä½ çš„å¯†ç "
python scripts/sync_dss_tables_to_metabase.py
```

## ğŸ“Š å®Œæ•´éªŒè¯æ¸…å•

- [ ] åœ¨Metabaseä¸­æœç´¢ "sales" - æ‰¾åˆ° Sales Targets A å’Œ Sales Campaigns A
- [ ] åœ¨Metabaseä¸­æœç´¢ "operating" - æ‰¾åˆ° Operating Costs
- [ ] åœ¨Metabaseä¸­æœç´¢ "performance" - æ‰¾åˆ° Performance Config A å’Œ Performance Scores C
- [ ] åœ¨Metabaseä¸­æœç´¢ "shop" - æ‰¾åˆ° Shop Commissions
- [ ] åœ¨Metabaseä¸­æœç´¢ "staging" - æ‰¾åˆ° Staging Raw Data
- [ ] æ£€æŸ¥æ•°æ®åº“è¯¦æƒ…é¡µçš„è¡¨æ€»æ•°
- [ ] æ£€æŸ¥è¡¨è¿‡æ»¤è®¾ç½®ï¼ˆå¦‚æœæ²¡æœ‰æ‰¾åˆ°æŸäº›è¡¨ï¼‰

## ğŸ’¡ æç¤º

ä»ä½ çš„æˆªå›¾çœ‹ï¼Œ**è¡¨å·²ç»åŒæ­¥äº†**ï¼å¯èƒ½åªæ˜¯ï¼š
1. éœ€è¦æ»šåŠ¨é¡µé¢æŸ¥çœ‹æ›´å¤šè¡¨
2. è¡¨åæ˜¾ç¤ºæ ¼å¼ä¸åŒï¼ˆä¸‹åˆ’çº¿å˜æˆç©ºæ ¼ï¼Œé¦–å­—æ¯å¤§å†™ï¼‰
3. æŸäº›è¡¨åœ¨åˆ—è¡¨çš„å…¶ä»–ä½ç½®

**å»ºè®®**ï¼šä½¿ç”¨æœç´¢åŠŸèƒ½æŸ¥æ‰¾ç‰¹å®šçš„è¡¨åï¼Œè¿™æ ·æ›´å®¹æ˜“æ‰¾åˆ°ã€‚

---

**æœ€åæ›´æ–°**: 2025-11-26 17:05

