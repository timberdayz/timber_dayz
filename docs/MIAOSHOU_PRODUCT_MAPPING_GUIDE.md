# 妙手ERP产品数据域映射指南

**快速参考** | **日期**: 2025-11-05 | **版本**: v4.6.3

## 📝 映射配置表（快速参考）

### ✅ 需要映射的字段

| Excel列名 | 映射到 | 说明 |
|---------|-------|------|
| *商品名称 | 商品名称 → product_name | 必填字段 |
| *单价（元） | 价格 → price | 单个售卖价格（人民币）|
| 库存总量 | 库存总量 → total_stock | 所有持有的库存数量 |
| 可用库存 | 可用库存 → available_stock | 可售卖的库存数量 |
| 预占库存 | 预占库存 → reserved_stock | 已拍但未付款的库存 |
| 在途库存 | 在途库存 → in_transit_stock | 运输中的库存（不可售卖）|

### ❌ 不需要映射的字段

| Excel列名 | 原因 |
|---------|------|
| 总价（元） | 可通过数量×单价计算，避免冗余 |
| 活动预留库存 | 暂时不使用 |
| 计划库存 | 暂时不使用 |
| 安全库存 | 暂时不使用 |

## 🎯 操作步骤

### 1. 上传文件

- 选择妙手ERP产品数据Excel文件
- 等待文件上传和预览

### 2. 生成智能映射

- 点击"生成智能映射"按钮
- 系统会自动识别并匹配字段
- 预期会自动匹配所有6个需要的字段

### 3. 检查映射结果

**检查项**:
- [ ] *商品名称 → product_name（绿色，高置信度）
- [ ] *单价（元） → price（绿色，高置信度）
- [ ] 库存总量 → total_stock（绿色，高置信度）
- [ ] 可用库存 → available_stock（绿色，高置信度）
- [ ] 预占库存 → reserved_stock（绿色，高置信度）
- [ ] 在途库存 → in_transit_stock（绿色，高置信度）
- [ ] 总价（元） → 无需映射（橙色）
- [ ] 活动预留库存 → 无需映射（橙色）
- [ ] 计划库存 → 无需映射（橙色）
- [ ] 安全库存 → 无需映射（橙色）

### 4. 手动调整（如需要）

如果某些字段未正确匹配：
1. 点击该字段的"标准字段"下拉框
2. 搜索正确的标准字段（支持中文/拼音搜索）
3. 选择后自动更新映射

### 5. 确认并入库

- 点击"确认映射并入库"按钮
- 等待数据验证和入库
- 查看成功提示消息

### 6. 保存模板（可选）

- 点击"保存为模板"按钮
- 模板名称：`miaoshou_products_snapshot_v2`
- 下次导入同类型文件时自动应用

## ⚠️ 常见问题

**Q: 为什么"总价"不需要映射？**  
A: 总价是计算字段（数量×单价），只存储原子级数据可以避免数据冗余和不一致。

**Q: "在手库存"是什么？**  
A: 这是历史遗留的错误字段名，请使用"库存总量"、"可用库存"等细分字段。

**Q: 如何知道数据已正确入库？**  
A: 
1. 看到"数据入库成功！已导入xxx条记录"消息
2. 前往"产品管理"页面查看产品列表
3. 检查产品详情中的库存和价格信息

**Q: 映射后数据还是不正确？**  
A: 
1. 检查Excel文件是否是最新版本
2. 确认表头行设置正确（通常是第1行）
3. 查看"数据隔离区"是否有质量问题的记录
4. 联系系统管理员查看日志

## 📞 技术支持

- 详细文档：`docs/INVENTORY_PRICE_MAPPING_SOLUTION.md`
- 系统日志：`logs/` 目录
- 数据隔离区：前端界面 → 数据隔离区

---

**文档版本**: v1.0  
**最后更新**: 2025-11-05  
**适用平台**: 妙手ERP  
**数据域**: products（产品数据域）

