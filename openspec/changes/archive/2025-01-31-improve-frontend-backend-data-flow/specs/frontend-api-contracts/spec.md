## 修改的需求

### 需求：API响应格式一致性
所有API端点必须返回与前端期望一致的响应格式。

#### 场景：成功的API响应
- **当** 前端调用任何API端点时
- **则** 响应必须包含：
  - `success: true` 字段
  - `data` 字段，包含响应负载
  - `message` 字段，包含可选的成功消息
  - 对于分页响应：`total`, `page`, `page_size` 字段

#### 场景：分页响应格式
- **当** 前端调用带分页的API端点时
- **则** 响应必须包含：
  - `data` 数组，包含项目列表
  - `total` 数字，表示总数量
  - `page` 数字，表示当前页码
  - `page_size` 数字，表示每页数量
  - `total_pages` 数字（计算得出）
  - `has_previous` 布尔值
  - `has_next` 布尔值

#### 场景：错误响应格式
- **当** API端点遇到错误时
- **则** 响应必须包含：
  - `success: false` 字段
  - `message` 字段，包含用户友好的错误消息
  - `error` 对象，包含：
    - `code` 字段（错误代码）
    - `type` 字段（错误类型：ValidationError, SystemError等）
    - `detail` 字段（技术细节）
    - `recovery_suggestion` 字段（用户友好的恢复步骤）

## 新增的需求

### 需求：前端API方法完整性
Vue组件中引用的所有前端API方法必须存在于 `frontend/src/api/index.js` 中。

#### 场景：getProducts方法存在
- **当** 前端组件调用 `api.getProducts()` 时
- **则** 该方法必须存在并调用 `/products/products` 端点
- **且** 该方法必须返回期望格式的数据

#### 场景：错误处理包装器
- **当** 任何前端API方法遇到错误时
- **则** 错误必须被捕获并用用户友好的消息包装
- **且** 错误在适用时应包含恢复建议

### 需求：数据库查询字段验证
所有数据库查询必须在执行前验证引用的字段是否存在。

#### 场景：字段存在性验证
- **当** 查询在SELECT或ORDER BY子句中引用字段时
- **则** 系统必须验证字段在目标表/视图中存在
- **且** 如果字段不存在，返回包含字段名的清晰错误消息

#### 场景：物化视图字段验证
- **当** 查询物化视图时
- **则** 系统必须验证所有引用的字段在视图定义中存在
- **且** 如果字段缺失，提供清晰的错误消息，指明缺失的字段和正在查询的视图

