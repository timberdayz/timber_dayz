## 修改的需求

### 需求：物化视图字段一致性
所有物化视图必须具有与查询代码中用法匹配的字段定义。

#### 场景：mv_inventory_by_sku字段一致性
- **当** 查询 `mv_inventory_by_sku` 视图时
- **则** SELECT和ORDER BY子句中引用的所有字段必须存在于视图定义中
- **且** 如果在ORDER BY子句中使用，`metric_date` 字段必须可用

#### 场景：fact_product_metrics字段一致性
- **当** 查询 `fact_product_metrics` 表时
- **则** 查询中引用的所有字段必须存在于表schema中
- **且** 如果在查询中引用，`metric_type` 字段必须可用

## 新增的需求

### 需求：物化视图查询验证
所有物化视图查询必须在执行前验证字段存在性。

#### 场景：执行前字段验证
- **当** 对物化视图执行查询时
- **则** 系统必须验证所有引用的字段存在
- **且** 如果字段缺失，在执行查询前返回错误
- **且** 错误消息必须指明：
  - 缺失的字段名
  - 正在查询的视图
  - 建议的修复方法（向视图添加字段或更新查询）

#### 场景：视图元数据缓存
- **当** 验证字段存在性时
- **则** 系统可以缓存视图元数据以提高性能
- **且** 当视图刷新或重新创建时，必须进行缓存失效

