# 数据看板能力

## Requirements

### Requirement: 销售看板
系统应提供实时销售看板，包含关键绩效指标（KPI）和可视化。

#### Scenario: 销售KPI显示
- **WHEN** 用户打开销售看板
- **THEN** 系统从物化视图显示GMV、订单数、平均订单价值、转化率和增长率

#### Scenario: 销售趋势图
- **WHEN** 用户选择日期范围进行销售分析
- **THEN** 系统使用ECharts显示折线图，展示随时间变化的销售趋势，支持日/周/月粒度

#### Scenario: 平台对比
- **WHEN** 用户查看销售看板
- **THEN** 系统按平台（Shopee、TikTok、Amazon）显示销售分解，使用饼图或柱状图

### Requirement: 库存看板
系统应提供库存看板，包含库存水平、周转率和低库存提醒。

#### Scenario: 库存概览显示
- **WHEN** 用户打开库存看板
- **THEN** 系统显示总SKU数、总库存价值、平均库存天数和低库存SKU数

#### Scenario: 低库存提醒
- **WHEN** 库存水平低于再订购点
- **THEN** 系统在看板中高亮显示SKU，带有警告指示器，并包含在低库存提醒列表中

#### Scenario: 库存周转分析
- **WHEN** 用户请求库存周转报告
- **THEN** 系统从销售和库存数据计算周转率，并按周转率显示SKU排名

### Requirement: 财务看板
系统应提供财务看板，包含收入、费用、利润和现金流指标。

#### Scenario: 财务KPI显示
- **WHEN** 用户打开财务看板
- **THEN** 系统从财务物化视图显示收入、费用、毛利润、净利润和利润率

#### Scenario: 利润趋势可视化
- **WHEN** 用户选择时间段
- **THEN** 系统显示利润趋势图，展示随时间变化的收入、COGS、费用和净利润

#### Scenario: 费用分解
- **WHEN** 用户查看费用分析
- **THEN** 系统按类别（营销、运费、运营）显示费用分解，使用饼图

### Requirement: 店铺健康看板
系统应提供店铺健康监控，包含健康评分、风险等级和性能趋势。

#### Scenario: 健康评分计算
- **WHEN** 显示店铺健康看板
- **THEN** 系统根据销售表现、库存周转率、订单履约率计算健康评分，并显示评分（0-100）和颜色编码

#### Scenario: 风险等级评估
- **WHEN** 计算店铺健康评分
- **THEN** 系统根据评分阈值分配风险等级（低/中/高）并显示风险指示器

#### Scenario: 性能趋势分析
- **WHEN** 用户查看店铺性能
- **THEN** 系统显示趋势图，展示健康评分随时间的变化，并高亮显示改善或下降

### Requirement: 实时数据更新
系统应为看板指标提供实时或近实时数据更新。

#### Scenario: 自动刷新
- **WHEN** 看板打开
- **THEN** 系统每5分钟或根据用户请求自动从物化视图刷新数据

#### Scenario: 最后更新时间戳
- **WHEN** 看板显示指标
- **THEN** 系统显示"最后更新"时间戳，指示数据最后刷新的时间

### Requirement: 数据筛选和钻取
系统应支持筛选和钻取功能以进行详细分析。

#### Scenario: 日期范围筛选
- **WHEN** 用户选择日期范围筛选器
- **THEN** 系统更新所有看板指标和图表以反映所选日期范围

#### Scenario: 平台筛选
- **WHEN** 用户选择特定平台
- **THEN** 系统筛选所有指标以仅显示所选平台的数据

#### Scenario: 店铺钻取
- **WHEN** 用户在看板中点击店铺
- **THEN** 系统导航到店铺详情页面，显示详细指标和交易历史

### Requirement: 响应式设计
系统应提供响应式看板布局，适应不同屏幕尺寸。

#### Scenario: 桌面显示
- **WHEN** 在桌面（>=1920px宽度）查看看板
- **THEN** 系统显示多列布局的看板，显示所有KPI和图表

#### Scenario: 平板显示
- **WHEN** 在平板（768px-1919px宽度）查看看板
- **THEN** 系统将布局调整为两列网格，图表堆叠显示

#### Scenario: 移动显示
- **WHEN** 在移动设备（<768px宽度）查看看板
- **THEN** 系统显示单列布局，包含可折叠部分
